<!DOCTYPE html>
<html>
<head>
<title>Location Verification</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    background: #f4f4f4;
    color: #333;
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
}

.header {
    background: #d92727; /* red */
    padding: 20px;
    color: white;
    font-size: 26px;
    font-weight: bold;
    letter-spacing: 1px;
}

.container {
    margin-top: 60px;
    padding: 20px;
}

.msg {
    font-size: 22px;
}

.loading {
    color: #157f26; /* green */
    font-weight: bold;
}

.error {
    color: #cc0000;
    font-weight: bold;
}
</style>

<script>
function checkGPS() {
    const allowedLat = 25.1448600;
    const allowedLng = 75.8623596;
    const allowedRadius = 50; // 50 meters
    const googleFormURL = "https://docs.google.com/forms/d/e/1FAIpQLSeLi6rBSMcIp0b08-YIJM3RdP7TPjgnjR15RLnzTji1Vg9a_A/viewform?usp=header";

    document.getElementById("status").innerHTML =
        "<span class='loading'>Requesting GPS location... Please allow permission.</span>";

    if (!navigator.geolocation) {
        document.getElementById("status").innerHTML =
            "<span class='error'>Your device does not support GPS.</span>";
        return;
    }

    navigator.geolocation.getCurrentPosition(success, error, {
        enableHighAccuracy: true,
        timeout: 15000,
        maximumAge: 0
    });

    function success(position) {
        const userLat = position.coords.latitude;
        const userLng = position.coords.longitude;

        const R = 6371000;
        const dLat = (userLat - allowedLat) * Math.PI / 180;
        const dLng = (userLng - allowedLng) * Math.PI / 180;

        const a = Math.sin(dLat / 2) ** 2 +
            Math.cos(allowedLat * Math.PI / 180) *
            Math.cos(userLat * Math.PI / 180) *
            Math.sin(dLng / 2) ** 2;

        const distance = R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

        if (distance <= allowedRadius) {
            window.location.href = googleFormURL;
        } else {
            document.getElementById("status").innerHTML =
                "<span class='error'>❌ Access Denied — You are outside the 50m allowed radius</span>";
        }
    }

    function error(err) {
        if (err.code === 1) {
            document.getElementById("status").innerHTML =
                "<span class='error'>Permission denied. Please allow location access.</span>";
        } else if (err.code === 2) {
            document.getElementById("status").innerHTML =
                "<span class='error'>Location unavailable. Try moving outdoors.</span>";
        } else if (err.code === 3) {
            document.getElementById("status").innerHTML =
                "<span class='error'>GPS timeout. Please retry.</span>";
        } else {
            document.getElementById("status").innerHTML =
                "<span class='error'>Unknown GPS error.</span>";
        }
    }
}
</script>
</head>

<body onload="checkGPS()">

<div class="header">
    YOUR-HEADER-TEXT-HERE
</div>

<div class="container">
    <h2 id="status" class="msg">Loading...</h2>
</div>

</body>
</html>
